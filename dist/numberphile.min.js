(function(){var a,b,c,d=[].slice;c=function(){function b(a,b){null==b&&(b={}),this.root=a,c=b.decimalPrecision||2,this.repr=d(this.root)}var c,d,e,f,g,h;return g="int",f="float",h="number",c=2,d=function(b){var c;return c=new a,"string"==typeof b?(c.type=f,c.origin=e(b)):"number"==typeof b&&(c.type=h,c.origin=b),c.set(e(b)),c},e=function(a){var b,c;return"string"==typeof a&&(c=a.match(/\./g),b=a.match(/,/g),b=null!=b?b.length:0,c=null!=c?c.length:0,(b>0||0===b&&c>1)&&c>0&&(a=a.replace(/\./g,"")),a=a.replace(/,/g,".")),parseFloat(a)},b.prototype.add=function(b){return this.repr.set(this.repr.value+a.toFixedNumber(e(b),c)),this},b.prototype.divide=function(b){return this.repr.set(this.repr.value/a.toFixedNumber(e(b),c)),this},b.prototype.mod=function(b){return this.repr.set(this.repr.value%a.toFixedNumber(e(b),c)),this},b.prototype.multiply=function(b){return this.repr.set(this.repr.value*a.toFixedNumber(e(b),c)),this},b.prototype.subtract=function(b){return this.repr.set(this.repr.value-a.toFixedNumber(e(b),c)),this},b.prototype.result=function(){return this.val()},b.prototype.value=function(){return this.val()},b.prototype.val=function(b){var d,e;return null==b&&(b=null),null==b&&(b="float"),""===b&&(b="float"),d=this.repr.value,"float"===b&&(e=d),"import"===b&&(e=a.toFixed(d,c).replace(/\./g,",").replace(/\B(?=(\d{3})+(?!\d))/g,".")),e},b}(),b=function(){function a(a,b,c){this.firstFactor=null!=a?a:null,this.secondFactor=null!=b?b:null,this.operator=null!=c?c:null,this.result=0,this.remainder=null}return a}(),a=function(){function a(a){this.origin=null!=a?a:0,this.value=this.origin,this.type="unknown"}return a.prototype.set=function(b){var c;return c=a.toFixedNumber(b),this.value=c,this.value},a.toFixedNumber=function(b,c){return parseFloat(a.toFixed(b,c))},a.toFixed=function(a,b){var c,d,e,f,g;return b=b||2,e=0>a,g=Math.pow(10,b),a=Math.round(a*g),d=String((e?Math.ceil:Math.floor)(a/g)),c=String((e?-a:a)%g),f=new Array(Math.max(b-c.length,0)+1).join("0"),b?d+"."+f+c:d},a}(),this.N=function(a){return new c(a)},"undefined"!=typeof exports&&null!==exports&&(exports.NumberphileReactor=c,exports.N=function(a){return new NumberphileRector(a)}),this.Numberphile=function(){function a(a,b){return this.element=a,this.settings=$.extend(this.defaults,b),this.initialize(),this}var b,c,d;return a.prototype._f_selectors={numberInput:"input[type=text], input[type=number]"},d={thousandsMatch:/\B(?=(\d{3})+(?!\d))/g,importTypableCharacter:/[0-9,\.]/g},a.prototype.defaults={debug:!1,autowire:!0,autofocus:!1,importMaxDecimalDigits:2,importDecimalSeparator:",",importThoudandsSeparator:"."},a.prototype.initialize=function(){return"true"===this.element.attr("data-autofocus")&&(this.settings.autofocus=!0),"true"===this.element.attr("data-autowire")&&(this.settings.autowire=!0),this.settings.autowire&&"import"===this.element.attr("data-format")&&this.element.bind("blur",function(){return $(this).numberphile("formatImportToHumanReadableFormat")}).bind("focus",function(){return $(this).numberphile("editModeForImport")}).keydown(function(a){return c(a)?void 0:a.preventDefault()}).val(N(this.element.val()).val("import")),this.settings.autofocus?this.element.bind("focus",function(){return this.select()}):void 0},a.prototype.humanReadableImportToNumber=function(){return this.element.is(this._f_selectors.numberInput)?this.element.val(this.SToNumber(this.element.val())):void 0},a.prototype.editModeForImport=function(){return this.element.is(this._f_selectors.numberInput)?this.element.val(this.SToNumber(this.element.val()).toString().replace(".",this.settings.importDecimalSeparator)):void 0},a.prototype.formatImportToHumanReadableFormat=function(){return this.element.is(this._f_selectors.numberInput)?this.element.val(this.numberToS(this.element.val())):void 0},c=function(a){return 188===a.keyCode||46===a.keyCode||8===a.keyCode||9===a.keyCode||27===a.keyCode||13===a.keyCode||65===a.keyCode&&a.ctrlKey===!0||a.keyCode>=35&&a.keyCode<=39?!0:a.shiftKey||(a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105)?!1:!0},b=function(a){var b,c;return a=a||window.event,b=a.which||a.keyCode,c=String.fromCharCode(b)},a.prototype.log=function(a){return this.settings&&("undefined"!=typeof console&&null!==console?console.log:void 0)&&this.settings.debug?console.log(a):void 0},a.prototype.SToNumber=function(a){return N(a).val()},a.prototype.numberToS=function(a){return N(a).val("import")},a}(),"undefined"!=typeof $&&null!==$&&"undefined"!=typeof window&&null!==window&&!function(a){return a.fn.extend({numberphile:function(){var b,c;return c=arguments[0],b=2<=arguments.length?d.call(arguments,1):[],this.each(function(){var d,e;return d=a(this),e=d.data("numberphile-class"),e||d.data("numberphile-class",e=new Numberphile(d,c)),"string"==typeof c?e[c].apply(e,b):void 0})}})}(window.jQuery,window),"undefined"!=typeof window&&null!==window&&"undefined"!=typeof $&&null!==$&&!function(a){return a(window).bind("load",function(){return a('[data-numberphile="auto"]').each(function(){var b,c,d;b=a(this);try{if(c=b.data(),null!=c)return b.numberphile(c)}catch(e){return d=e,b.numberphile({autowire:"true"===b.attr("data-autowire")?!0:!1,autofocus:"true"===b.attr("data-autofocus")?!0:!1,importMaxDecimalDigits:b.attr("data-importMaxDecimalDigits"),importDecimalSeparator:b.attr("data-importDecimalSeparator"),importThoudandsSeparator:b.attr("data-importThoudandsSeparator")})}})})}(window.jQuery),this.NumberphileCounter=function(){function a(a,b){return this.element=a,this.settings=$.extend(this.defaults,b),this.settings.step=parseInt(this.settings.step,10),this.initialize()}return a.prototype.defaults={debug:!1,autowire:!0,step:1,target:null},a.prototype.initialize=function(){return null==this.settings.target&&(this.settings.target=null!=this.element.attr("data-target")&&""!==this.element.attr("data-target")?$(this.element.attr("data-target")):this.element),this.settings.autowire&&this.element.bind("click",function(){return $(this).numberphileCounter("step")}),this},a.prototype.step=function(){var a,b;return a=this.element.attr("data-step"),b=$(this.element.attr("data-target")),b.each(function(){var b,c,d;return b=$(this),c=parseFloat(b.val()),d=parseFloat(a),d+=c,b.is("input")?$(this).val(d):b.text(d),b.trigger("numberphile:change")})},a.prototype.set=function(a){var b;return b=$(this.element.attr("data-target")),b.each(function(){var b,c;return b=$(this),c=parseFloat(a),b.is("input")?$(this).val(c):b.text(c),b.trigger("numberphile:change")})},a}(),"undefined"!=typeof window&&null!==window&&"undefined"!=typeof $&&null!==$&&(!function(a){return a.fn.extend({numberphileCounter:function(){var b,c;return c=arguments[0],b=2<=arguments.length?d.call(arguments,1):[],this.each(function(){var d,e;return d=a(this),e=d.data("numberphileCounter-class"),e||d.data("numberphileCounter-class",e=new NumberphileCounter(d,c)),"string"==typeof c?e[c].apply(e,b):void 0})}})}(window.jQuery,window),!function(a){return a(window).bind("load",function(){return a('[role="counter-trigger"]').each(function(){var b,c,d;b=a(this);try{if(c=b.data(),null!=c)return b.numberphileCounter(c)}catch(e){return d=e,b.numberphileCounter({step:b.attr("data-step")||1,target:b.attr("data-target")||""})}})})}(window.jQuery))}).call(this);